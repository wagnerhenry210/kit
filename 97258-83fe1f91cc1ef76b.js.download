(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97258],{411839:function(e,t,s){"use strict";s.d(t,{Z:function(){return v}});var r=s(397458),n=s(652983),l=s(198974),i=s(875770),a=s(14517),o=s(424900),u=s(294541);let d=null;var c=s(993519),h=s(777717),m=s(52732),g=s(259488),p=s(714470),y=s.n(p);function f(e,t){return`${t?"dark+":""}${e}`}let x=new Map,_=async e=>{let{dark:t,deploymentId:s,teamId:r,withReachable:n}=e;await (0,c.Z)(100);let l=`/api/screenshot${(0,u.c)({dark:t,deploymentId:s,teamId:r,withStatus:n})}`,i=(0,m.P)(l,"GET SCREENSHOT"),a=await fetch(l,{headers:{accept:!function(){if(null===d){let e=document.createElement("canvas");d=!!e.getContext("2d")&&e.toDataURL("image/webp").startsWith("data:image/webp")}return d}()?"*/*":"image/webp,image/apng,image/*,*/*;q=0.8"}});if(200!==a.status){try{(0,m.b)(i,await a.text(),a.status)}catch(e){(0,m.b)(i,e,a.status)}throw Error("An error occurred when loading the screenshot.")}(0,m.b)(i,null,200);let o=await a.blob();return[URL.createObjectURL(o),n?"1"===a.headers.get("x-vercel-screenshot-reachable"):null]};var v=n.memo(e=>{var t;let{deployment:s,noBorderRadius:u=!1,withReachable:d=!1,withImageWrapper:c=!0,onReady:m,height:p,width:v,idForLoadingPreview:j,refresh:w,onScreenshotFailed:b=()=>null}=e,{resolvedTheme:E}=(0,l.F)(),[k,C]=(0,n.useState)("idle"),N=(0,g.m)(),{team:Z,isReady:D}=(0,h.t7)(),I=f((null==s?void 0:s.id)??"","dark"===E),[L,S]=(0,n.useState)(s?null===(t=x.get(I))||void 0===t?void 0:t[0]:null),R=f(j??"","dark"===E),[W,P]=(0,n.useState)("");(0,n.useEffect)(()=>{if(s&&s.status&&(D||N)&&"idle"===k){if(x.has(I)){let[e,t]=x.get(I);S(e),C("success"),m&&m(t);return}if(x.has(R)){let[e]=x.get(R);P(e)}C("loading"),_({dark:"dark"===E?"1":"0",deploymentId:s.id,teamId:null==Z?void 0:Z.id,withReachable:d}).then(e=>{let[t,s]=e;S(t),C("success"),x.set(I,[t,s]),m&&m(s)}).catch(()=>{S(null),C("failed")})}},[s,j,Z,k,d,w]);let O=v?{"--width":(0,o.Z)(v)}:{};return"idle"===k||"loading"===k?W.length>0?(0,r.jsx)("div",{className:(0,a.W)(y().imageWrapper,{[y()["no-border-radius"]]:u,[y()["fixed-height"]]:p,[y()["fixed-width"]]:v}),style:p?{"--height":(0,o.Z)(p),...O}:{},children:(0,r.jsx)("img",{alt:`Loading the screenshot for ${null==s?void 0:s.url}...`,className:y().previewImage,src:W})}):(0,r.jsx)(i.O,{className:y().skeleton,height:p||"100%",squared:u,style:p?{}:{paddingTop:"31.25% ",paddingBottom:"31.25% "},width:v||"100%"}):"failed"!==k&&s&&L?c?(0,r.jsx)("div",{className:(0,a.W)(y().imageWrapper,{[y()["no-border-radius"]]:u,[y()["fixed-height"]]:p,[y()["fixed-width"]]:v}),style:p?{"--height":(0,o.Z)(p),...O}:{},children:(0,r.jsx)("img",{alt:`Preview Screenshot of ${s.url}`,className:y().image,src:L})}):(0,r.jsx)("img",{alt:`Preview Screenshot of ${s.url}`,className:y().image,src:L}):b()})},797258:function(e,t,s){"use strict";s.d(t,{q:function(){return I},Z:function(){return L}});var r=s(397458),n=s(652983),l=s(14517),i=s(777717),a=s(591703),o=s(557626),u=s(177281),d=s(582599),c=s(728947),h=s(827908);let m=new Map;window.addEventListener("storage",e=>{e.key&&(null===e.newValue?m.delete(e.key):m.set(e.key,e.newValue))});class g{constructor(e,t){this.key=e,this.defaultValue=t,this.init()}init(){if(!m.has(this.key))try{m.set(this.key,window.localStorage.getItem(this.key))}catch(e){}}reset(){this.set(this.defaultValue)}get(){let e=m.get(this.key);if(!e)return this.defaultValue;try{return JSON.parse(e)}catch(e){return this.defaultValue}}set(e){try{let t=JSON.stringify(e);window.localStorage.setItem(this.key,t),m.set(this.key,t)}catch(e){}}remove(){try{window.localStorage.removeItem(this.key),m.delete(this.key)}catch(e){}}}var p=s(838739),y=s(244140),f=s(131711),x=s(698542),_=s(303213),v=s(717146),j=s(752416),w=s(23669),b=s(714470),E=s.n(b),k=e=>{let{title:t,message:s,link:n,action:l="Learn More",onDismiss:i}=e;return(0,r.jsxs)(_.Z,{style:{padding:"var(--geist-gap)",width:"100%",height:"100%",position:"absolute"},children:[(0,r.jsx)(a.ZP,{Component:"span",h5:!0,children:t}),(0,r.jsx)(v.L,{y:1/3}),(0,r.jsx)(_.Z,{className:E()["error-message"],children:(0,r.jsx)(j.Z,{children:(0,r.jsx)(a.ZP,{Component:"p",noMargin:!0,small:!0,type:"secondary",children:s})})}),(0,r.jsx)(v.L,{y:2/3}),(0,r.jsxs)(_.Z,{row:!0,style:{justifyContent:"center",alignItems:"flex-end"},children:[(0,r.jsx)(w.z,{onClick:i,size:"small",style:{flex:"1"},type:"secondary",children:"Dismiss"}),n?(0,r.jsx)(v.L,{x:.5}):null,n?(0,r.jsx)(x.Z,{external:!0,href:n,medium:!0,style:{flex:"1"},children:l}):null]})]})};let C=["https://vercel.com/","https://zeit.ink/","https://vercel.link/","https://err.sh/","https://github.com/zeit/","https://github.com/vercel/"],N=e=>{let{status:t,link:s}=e;return"string"==typeof s&&C.some(e=>s.startsWith(e))?(0,r.jsx)(x.Z,{external:!0,href:s,medium:!0,type:"secondary",children:"Learn More"}):"QUEUED"===t?(0,r.jsx)(x.Z,{external:!0,href:s,medium:!0,children:"Add Concurrent Builds"}):(0,r.jsx)(w.z,{passthroughOnClick:e=>{e.preventDefault();let t=document.querySelector("[data-status=error]");if(t){if((null==t?void 0:t.dataset.state)!=="open"){var s;null===(s=t.querySelector("button"))||void 0===s||s.click()}t.scrollIntoView({behavior:"smooth"})}},type:"secondary",children:"View Logs"})};var Z=e=>{let{title:t,link:s,message:n,status:l}=e;return(0,r.jsxs)(_.Z,{style:{padding:"var(--geist-gap)",width:"100%",height:"100%",position:"absolute"},children:[(0,r.jsx)(a.ZP,{Component:"span",h5:!0,children:t}),(0,r.jsx)(v.L,{y:1/3}),(0,r.jsx)(_.Z,{className:E()["error-message"],children:(0,r.jsx)(j.Z,{children:(0,r.jsx)(a.ZP,{Component:"p",noMargin:!0,small:!0,type:"secondary",children:n||"Your deployment has failed to build successfully. Please check out the logs for more details."})})}),s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.L,{y:2/3}),(0,r.jsx)(N,{link:s,status:l})]}):null]})},D=s(411839);function I(e){let{deploy:t,showError:s,isInConcurrentBuildsQueue:n}=e,{status:l,errorMessage:o,errorLink:d=""}=t,{isTeam:c,teamSlug:h}=(0,i.t7)(),m=(0,y.Z)(),{user:g,team:p}=m,x=function(e){var t;let s=(0,f.j)(e),r=null==e?void 0:null===(t=e.resourceConfig)||void 0===t?void 0:t.concurrentBuilds;return!!s&&!!r&&s>=r}(p||g);return"ERROR"===l?s?(0,r.jsx)(Z,{link:d,message:o||"Your deployment has failed to build successfully. Please check out the logs for more details.",status:l,title:"Build Failed"}):(0,r.jsx)(a.ZP,{className:E().statusText,small:!0,type:"error",children:"Deployment Failed"}):"FROZEN"===l||"FAILED"===l?(0,r.jsx)(a.ZP,{className:E().statusText,small:!0,type:"error",children:"No Screenshot Available"}):"NO_PRODUCTION"===l?(0,r.jsx)(u.Z,{className:E().statusText,delay:!1,text:"To deploy to production, push to the Repository Default branch.",children:(0,r.jsx)(a.ZP,{small:!0,type:"secondary",children:"No Production Deployment"})}):"CANCELED"===l?s&&o?(0,r.jsx)(Z,{link:d,message:o||"Deployment canceled.",status:l,title:"Build Canceled"}):(0,r.jsx)(a.ZP,{className:E().statusText,small:!0,type:"secondary",children:"Deployment Canceled"}):"QUEUED"===l?c&&x&&n?(0,r.jsx)(Z,{link:`/teams/${h}/settings/billing#concurrent-builds`,message:"The Deployment will start building once your other Deployments have finished. Add Concurrent Builds to build in parallel.",status:l,title:"Deployment Queued"}):(0,r.jsx)(a.ZP,{className:E().statusText,small:!0,type:"secondary",children:"Waiting for Build to Start…"}):(0,r.jsx)(a.ZP,{className:E().statusText,small:!0,type:"secondary",children:"Waiting for Build to Finish…"})}function L(e){var t;let{deployment:s,ignoreAliasWarning:i=!0,...a}=e,{showError:u=!1,link:c=!0,empty:m=!1,noHighlight:y,noBorder:f,noBorderRadius:x,useDeploymentUrl:_=!1}=a,v=c?null==s?void 0:s.name:void 0,{domain:j}=(0,h.C8)(v),w=j||a.projectDomain||null,[b,C]=function(e){let t=(0,n.useMemo)(()=>e?new g(`show-deployment-warning:${e.uid||e.id}`,!0):null,[e]),[s,r]=(0,n.useState)(()=>{let e=null==t?void 0:t.get();return"boolean"!=typeof e||e});return[s,e=>{null==t||t.set(e),r(e)}]}(s),N=(0,n.useMemo)(()=>{if(!s)return m?{status:"NO_PRODUCTION"}:null;let e=_?s.url:S(s,w);return{id:s.uid||s.id,url:e,status:s.state||s.status||s.readyState,errorMessage:s.readyStateReasonExternal||s.errorMessage,errorLink:s.errorLink,aliasWarning:s.aliasWarning}},[_,s,m,w]),L=!i&&b&&(null==N?void 0:N.status)==="READY"&&(null==N?void 0:null===(t=N.aliasWarning)||void 0===t?void 0:t.code)==="deprecated_now_sh",R=N&&"READY"!==N.status,W=(null==N?void 0:N.status)==="ERROR"||(null==s?void 0:s.aliasError);return(0,r.jsx)("div",{className:(0,l.W)("geist-ratio",E().container,{[E().fallback]:R,[E().secondary]:(null==N?void 0:N.status)==="CANCELED"||(null==N?void 0:N.status)==="QUEUED",[E().highlight]:!y,[E().error]:W,[E().warning]:L,[E().noProduction]:(null==N?void 0:N.status)==="NO_PRODUCTION",[E()["no-border"]]:f,[E()["no-border-radius"]]:x}),style:{"--ratio":"62.5%"},children:(null==s?void 0:s.aliasError)?(0,r.jsx)(Z,{message:s.aliasError.message,status:"ERROR",title:"Domain Error"}):L?(0,r.jsx)(k,{link:N.aliasWarning.link,message:N.aliasWarning.message,onDismiss:()=>C(!1),title:"Warning"}):R?(0,r.jsx)(I,{deploy:N,isInConcurrentBuildsQueue:null==s?void 0:s.isInConcurrentBuildsQueue,showError:u}):c&&(null==s?void 0:s.url)?(0,r.jsx)(o.r,{href:(0,d.j)(_?s.url:S(s,w)),onClick:()=>{p.co.track(p.s6.DEPLOYMENT_OVERVIEW_CLICKED_SCREENSHOT,{projectId:s.projectId||(null==w?void 0:w.projectId),deploymentId:s.id,deploymentTarget:s.target})},style:{width:"100%"},tab:!0,children:(0,r.jsx)(D.Z,{deployment:N,onScreenshotFailed:()=>(0,r.jsx)(I,{deploy:{...N,status:"FAILED"},isInConcurrentBuildsQueue:s.isInConcurrentBuildsQueue,showError:u}),withReachable:!0,...a})}):(0,r.jsx)(D.Z,{deployment:N,onScreenshotFailed:()=>(0,r.jsx)(I,{deploy:{...N,status:"FAILED"},isInConcurrentBuildsQueue:null==s?void 0:s.isInConcurrentBuildsQueue,showError:u}),withReachable:!0,...a})})}function S(e,t){let s=(null==t?void 0:t.name)||e.url;return!s||(0,c.Z)(s)?e.url:s}},582599:function(e,t,s){"use strict";s.d(t,{j:function(){return n}});var r=s(958298);function n(e){let t=function(e){let t=e.split(".").slice(-2).join(".");return(0,r.Q)(t)?"https:":"http:"}(e);return`${t}//${e}`}},958298:function(e,t,s){"use strict";s.d(t,{Q:function(){return n},V:function(){return r}});let r=new Set(["now.sh","vercel.app"]);function n(e){return r.has(e.toLowerCase())}},714470:function(e){e.exports={container:"screenshot_container__0v0xj",noProduction:"screenshot_noProduction__i37zn",error:"screenshot_error__N4Fq2",warning:"screenshot_warning__nFY2a",errorHeader:"screenshot_errorHeader__p2iZ8",secondary:"screenshot_secondary__TzJNW",fallback:"screenshot_fallback__ck3i3",highlight:"screenshot_highlight__E_8AH","no-border":"screenshot_no-border__L0cue","no-border-radius":"screenshot_no-border-radius__01_6o",imageWrapper:"screenshot_imageWrapper__KhmwX",fixedHeight:"screenshot_fixedHeight__hjTyO",fixedWidth:"screenshot_fixedWidth__WWfhf","fixed-height":"screenshot_fixed-height__wd1bb","fixed-width":"screenshot_fixed-width__gPWu1",statusText:"screenshot_statusText__rDFj3",image:"screenshot_image__fGVUW",previewImage:"screenshot_previewImage__8fYLe",blurryLoad:"screenshot_blurryLoad__ru8Xo","error-message":"screenshot_error-message__6Y2Sw"}}}]);