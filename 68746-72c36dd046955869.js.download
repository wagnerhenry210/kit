"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68746],{168746:function(e,r,t){t.d(r,{Z:function(){return K}});var n=t(397458),s=t(652983),i=t(106193),l=t(139316),o=t(623440),a=t(665759),c=t(30265),d=t(428416),u=t(632658),h=t(724543),p=t(717146),x=t(155593),j=t(244140),f=t(838739),y=t(908752),E=t(746201);let m=e=>{let{user:r,teams:t,selectedId:s,onChange:i,currentTeamId:l}=e,o=(0,y.ui)();return(0,n.jsxs)(u.P,{onChange:i,placeholder:"Select a Destination",prefix:s?"_create"===s?(0,n.jsx)(c.v,{color:"var(--accents-5)",weight:"bold"}):(0,n.jsx)(h.qE,{hash:null==o?void 0:o.avatar,size:18}):(0,n.jsx)(d.Q,{color:"var(--accents-5)"}),value:s||void 0,children:[r?(0,n.jsx)("optgroup",{label:"Personal Account",children:(0,n.jsxs)("option",{disabled:r.uid===l,value:r.uid,children:[r.name||r.username||r.email,r.uid===l?" (Current)":""]})}):null,(0,n.jsx)("optgroup",{label:"Teams",children:t?t.map(e=>(0,n.jsxs)("option",{disabled:e.id===l,value:e.id,children:[e.name,e.id===l?" (Current)":""]},e.id)):null}),(0,n.jsx)("optgroup",{label:"Create",children:(0,n.jsx)("option",{value:"_create",children:"Create a New Team"})})]})};var S=t(313003),T=t.n(S),b=t(557626),P=t(563790),v=t(910479),w=t(388757),g=t(303213),A=t(251743),C=t(73796),_=t(294541),D=t(881454),I=t(409146),Z=t(25063),L=t(368726),O=t(713536),k=t(591703),B=t(15129),R=t(71346),F=t(45518),N=(0,F._K)(()=>{let{isTeam:e,team:r}=(0,j.Z)(),[,t]=(0,y.r_)(),l=(0,y.ui)(),{submit:o,...a}=(0,F.e2)(),c=(0,s.useCallback)(async n=>{n.preventDefault();let s=await o({teamId:null==l?void 0:l.id});s&&(f.co.track(f.s6.PROJECT_TRANSFER_ADDED_BILLING_METHOD),(0,y.wn)({dispatch:t,team:r,isTeam:e,destinationAccount:l}))},[t,r,e,l,o]);return(0,n.jsxs)("form",{onSubmit:c,children:[(0,n.jsxs)(i.Body,{children:[(0,n.jsx)(E.q,{children:"Transfer Project"}),(0,n.jsxs)(i.Inset,{last:!0,children:[(0,n.jsxs)(E.O,{children:[(0,n.jsx)("b",{children:null==l?void 0:l.name})," does not have a valid payment method."]}),(0,n.jsx)(p.L,{y:.5}),(0,n.jsx)(E.O,{children:"Please add one before transferring your Project to ensure no interruption in service."}),(0,n.jsx)(p.L,{}),(0,n.jsx)(F.U1,{...a})]})]}),(0,n.jsxs)(i.Actions,{children:[(0,n.jsx)(i.Action,{onClick:()=>t({type:"BACK"}),type:"secondary",children:"Back"}),(0,n.jsx)(i.Action,{buttonType:"submit",loading:a.submitting,children:"Continue"})]})]})}),G=t(46838),M=t(614029);let U={[y.Ss.DESTINATION_SELECT]:e=>{let{close:r}=e,{teams:t,isTeam:l,team:o,isLoading:c,user:d}=(0,j.Z)(),[{destinationId:u},h]=(0,y.r_)(),[S,T]=(0,s.useState)(!1),[b,P]=(0,s.useState)(),v=(0,y.ui)(),w=(0,s.useMemo)(()=>{if(!t)return[];if(!l||!o)return t;let e=[];for(let r of t)r.id===o.id?e.unshift(r):e.push(r);return e},[t,l,o]);(0,s.useEffect)(()=>{c||0!==w.length||null!==u||h({type:"SET_DESTINATION",id:"_create"})},[w,c,u,h]);let g=(0,s.useCallback)(()=>{if("_create"===u)h({type:"SET_STEP",step:y.Ss.CREATE_TEAM});else if(null==u?void 0:u.startsWith("team_")){T(!0);try{return f.co.track(f.s6.PROJECT_TRANSFER_SELECTED_EXISTING_TEAM),(0,y.wn)({team:o,isTeam:l,destinationAccount:v,dispatch:h})}catch(e){T(!1),P((0,a.SC)(e))}}else(0,y.NE)({team:o,isTeam:l,destinationAccount:v,dispatch:h})},[u,h,l,o,v]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.Body,{children:[(0,n.jsx)(E.q,{children:"Transfer Project"}),(0,n.jsxs)(i.Inset,{last:!0,children:[(0,n.jsx)(E.O,{children:"Select a Vercel Account to transfer your Project to."}),(0,n.jsx)(p.L,{}),(0,n.jsxs)(E.O,{children:["Your Project and all of its dependencies (such as Domains) will be transferred ",(0,n.jsx)("b",{children:"without downtime or workflow interruptions"}),"."]}),(0,n.jsx)(p.L,{}),(0,n.jsx)(E.O,{children:"Prior to the transfer, you will be presented with the included dependencies, and how potential conflicts or plan changes will be resolved."}),(0,n.jsx)(p.L,{}),(0,n.jsx)(m,{currentTeamId:l?null==o?void 0:o.id:null==d?void 0:d.uid,onChange:e=>{let r=e.target.value;h({type:"SET_DESTINATION",id:r})},selectedId:u||"",teams:w,user:d}),b?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.L,{}),(0,n.jsx)(x.Z,{error:b})]}):null]})]}),(0,n.jsxs)(i.Actions,{children:[(0,n.jsx)(i.Action,{onClick:r,type:"secondary",children:"Cancel"}),(0,n.jsx)(i.Action,{disabled:!u,loading:S,onClick:g,children:"Continue"})]})]})},[y.Ss.CREATE_TEAM]:()=>{let[e,r]=(0,s.useState)(""),[t,l]=(0,s.useState)(""),[o,a]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(!1),[,x]=(0,y.r_)(),[j,m]=(0,s.useState)(!1),S=T()(e),w=j?t:S,g=async r=>{null==r||r.preventDefault(),e||a("Please choose a name."),w||d("Please choose a slug."),a(null),d(null),h(!0);let t=await (0,v.C)({name:e,slug:w,source:"project-transfer"});if(h(!1),"error"in t){let e=t.error;"name_invalid"===e.code?a(e.message):d(e.message);return}t||d("Could not create team."),f.co.track(f.s6.PROJECT_TRANSFER_CREATED_TEAM),x({type:"SET_DESTINATION",id:t.id}),x({type:"SET_STEP",step:y.Ss.GATHER_DEPS})};return(0,n.jsxs)("form",{onSubmit:g,children:[(0,n.jsxs)(i.Body,{children:[(0,n.jsx)(E.q,{children:"Transfer Project"}),(0,n.jsxs)(i.Inset,{last:!0,children:[(0,n.jsx)(E.O,{children:"To collaborate with others on your Project and enjoy additional optional features such as multiple Concurrent Builds or Password Protection, create a Vercel Team."}),(0,n.jsx)(p.L,{}),(0,n.jsx)(P.I,{autoFocus:!0,disabled:u,error:o||void 0,id:"create-team-name",label:"Team Name",maxLength:48,onChange:e=>{a(null),r(e.target.value)},placeholder:"ACME",value:e}),(0,n.jsx)(p.L,{}),(0,n.jsx)(P.I,{disabled:u,error:c||void 0,id:"create-team-slug",label:"Team Slug",maxLength:32,onChange:e=>{m(!0),d(null),l(e.target.value)},placeholder:"acme",prefix:"vercel.com/",value:w}),(0,n.jsx)(p.L,{}),(0,n.jsxs)(E.O,{children:["Includes a 14 day trial of the"," ",(0,n.jsx)(b.r,{external:!0,href:"/pricing",type:"highlight",children:"Pro plan"})]})]})]}),(0,n.jsxs)(i.Actions,{children:[(0,n.jsx)(i.Action,{onClick:()=>x({type:"BACK"}),type:"secondary",children:"Back"}),(0,n.jsx)(i.Action,{buttonType:"submit",loading:u,onClick:g,children:"Continue"})]})]})},[y.Ss.BILLING]:N,[y.Ss.GATHER_DEPS]:e=>{let{project:r}=e,[t,l]=(0,s.useState)(null),[{transferData:o,destinationId:c},d]=(0,y.r_)(),{account:u,isTeam:h}=(0,j.Z)(),f=(0,s.useRef)(null);(0,y.ui)();let[{error:m},{initialDataLoaded:S}]=(0,D.f)({project:r,limit:y.DR}),{error:T,data:b}=(0,I.Z)(null==r?void 0:r.id),{data:P}=(0,Z.Z)(null==r?void 0:r.id),v=(0,s.useCallback)(async()=>{let e;try{e=await (0,A.I)(`${C.VE}/${r.id}/transfer/${c}${(0,_.c)({teamId:h?u.id:void 0})}`,{method:"GET",throwOnHTTPError:!0})}catch(e){return l((0,a.SC)(e))}d({type:"UPDATE",state:{transferData:e}})},[h,u,r,d,c]);(0,s.useEffect)(()=>{f.current||(v(),f.current=Date.now())},[v]),(0,s.useEffect)(()=>{S&&b&&P&&o&&f.current&&(f.current>Date.now()-1500?setTimeout(()=>{d({type:"SET_STEP",step:y.Ss.OVERVIEW})},1500):d({type:"SET_STEP",step:y.Ss.OVERVIEW}))},[S,b,P,o,d]);let L=m||T||t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.Body,{children:[(0,n.jsx)(E.q,{children:"Transfer Project"}),(0,n.jsx)(E.O,{center:!0,children:"Please wait while your Project's information is being fetched."}),(0,n.jsx)(p.L,{}),!L&&(0,n.jsx)(g.Z,{center:!0,children:(0,n.jsx)(w.$,{})}),L?(0,n.jsx)(g.Z,{center:!0,children:(0,n.jsx)(x.Z,{error:L})}):null,(0,n.jsx)(p.L,{})]}),(0,n.jsx)(i.Actions,{children:(0,n.jsx)(i.Action,{fullWidth:!0,onClick:()=>d({type:"BACK"}),children:"Back"})})]})},[y.Ss.OVERVIEW]:L.Z,[y.Ss.PAID_FEATURES]:()=>{let[{conflict:e,paidFeatures:r},t]=(0,y.r_)(),o=(0,R.ic)(),{data:a}=(0,l.PY)(o),c=(0,y.ui)(),{hasConflict:d}=e,u=d?e.conflicts:{},{concurrentBuilds:h,passwordProtection:x,previewDeploymentSuffix:j}=u,f=!!x&&!!a&&!r.passwordProtection&&!!a.passwordProtection,m=j&&r.previewDeploymentSuffix,S=(0,s.useMemo)(()=>{let e=0;return h&&r.concurrentBuilds&&(e+=h.difference*(h.price/100)),x&&r.passwordProtection&&(e+=x.price/100),j&&r.previewDeploymentSuffix&&(e+=j.price/100),e},[h,x,j,r]);return(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({type:"SET_STEP",step:y.Ss.GATHER_DEPS})},children:[(0,n.jsxs)(i.Body,{children:[(0,n.jsx)(E.q,{children:"Transfer Project"}),(0,n.jsxs)(i.Inset,{last:!0,children:[(0,n.jsx)(E.O,{children:"The Project you are transferring is taking advantage of additional paid features."}),(0,n.jsx)(p.L,{}),(0,n.jsxs)(E.O,{children:["Select the features you would like to continue using once the Project is transferred to"," ",(0,n.jsx)("b",{children:c?c.name||"slug"in c&&c.slug||"username"in c&&(null==c?void 0:c.username):null}),":"]}),(0,n.jsx)(p.L,{y:1.5}),(0,n.jsxs)(g.Z,{gap:.5,children:[h?(0,n.jsxs)(g.Z,{row:!0,vcenter:!0,children:[(0,n.jsxs)(g.Z,{Component:"label",row:!0,vcenter:!0,children:[(0,n.jsx)(O.Z,{checked:r.concurrentBuilds,label:!1,onChange:()=>t({type:"TOGGLE_BUILDS"})}),(0,n.jsx)(p.L,{inline:!0,x:.25}),(0,n.jsxs)(k.ZP,{noMargin:!0,preset:"body-2",style:{whiteSpace:"nowrap"},children:[(0,n.jsxs)("b",{children:["+",h.difference," Concurrent Builds"]})," ($",h.price/100," per slot)"]})]}),(0,n.jsx)(g.Z,{flex:"0 0 auto",children:(0,n.jsxs)(k.ZP,{noMargin:!0,preset:"body-2",children:["$",h.difference*(h.price/100),"/mo"]})})]}):null,x?(0,n.jsxs)(g.Z,{row:!0,vcenter:!0,children:[(0,n.jsxs)(g.Z,{Component:"label",row:!0,vcenter:!0,children:[(0,n.jsx)(O.Z,{checked:r.passwordProtection,label:!1,onChange:()=>t({type:"TOGGLE_PASSWORD"})}),(0,n.jsx)(p.L,{inline:!0,x:.25}),(0,n.jsx)(k.ZP,{noMargin:!0,preset:"body-2",style:{whiteSpace:"nowrap"},children:(0,n.jsx)("b",{children:"Advanced Deployment Protection"})})]}),(0,n.jsx)(g.Z,{flex:"0 0 auto",children:(0,n.jsxs)(k.ZP,{noMargin:!0,preset:"body-2",children:["$",x.price/100,"/mo"]})})]}):null,j?(0,n.jsxs)(g.Z,{row:!0,vcenter:!0,children:[(0,n.jsxs)(g.Z,{Component:"label",row:!0,vcenter:!0,children:[(0,n.jsx)(O.Z,{checked:r.previewDeploymentSuffix,label:!1,onChange:()=>t({type:"TOGGLE_SUFFIX"})}),(0,n.jsx)(p.L,{inline:!0,x:.25}),(0,n.jsx)(k.ZP,{noMargin:!0,preset:"body-2",style:{whiteSpace:"nowrap"},children:(0,n.jsx)("b",{children:"Preview Deployment Suffix"})})]}),(0,n.jsx)(g.Z,{flex:"0 0 auto",children:(0,n.jsxs)(k.ZP,{noMargin:!0,preset:"body-2",children:["$",j.price/100,"/mo"]})})]}):null,(0,n.jsx)(g.Z,{children:(0,n.jsx)("hr",{className:"geist-hr-reset"})}),(0,n.jsxs)(g.Z,{row:!0,vcenter:!0,children:[(0,n.jsx)(g.Z,{row:!0,vcenter:!0,children:(0,n.jsx)(k.ZP,{noMargin:!0,preset:"body-2",children:(0,n.jsx)("b",{children:"Total"})})}),(0,n.jsx)(g.Z,{flex:"0 0 auto",children:(0,n.jsxs)(k.ZP,{bold:!0,noMargin:!0,preset:"body-2",children:["$",S]})})]}),f||m?(0,n.jsx)(p.L,{}):null,f?(0,n.jsx)(g.Z,{children:(0,n.jsx)(B.Z,{fill:!0,label:!1,type:"warning",variant:"contrast",children:"Disabling Advanced Deployment Protection will remove access to password protection, protection bypass for automation and private production deployments."})}):null,m?(0,n.jsx)(g.Z,{children:(0,n.jsx)(B.Z,{fill:!0,label:!1,type:"warning",variant:"contrast",children:"The Preview Deployment Suffix feature will be enabled on the target Team, but you need to configure it manually after the Project was transferred."})}):null]})]})]}),(0,n.jsxs)(i.Actions,{children:[(0,n.jsx)(i.Action,{onClick:()=>t({type:"BACK"}),type:"secondary",children:"Back"}),(0,n.jsx)(i.Action,{buttonType:"submit",children:"Continue"})]})]})},[y.Ss.REMOVE_PAID_FEATURES]:()=>{let[{conflict:e},r]=(0,y.r_)(),t=(0,R.ic)(),{data:s}=(0,l.PY)(t),{hasConflict:o}=e,a=o?e.conflicts:{},{concurrentBuilds:c,passwordProtection:d,previewDeploymentSuffix:u}=a,h=!!d&&!!s&&d&&!!s.passwordProtection;return(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r({type:"SET_STEP",step:y.Ss.GATHER_DEPS})},children:[(0,n.jsxs)(i.Body,{children:[(0,n.jsx)(E.q,{children:"Transfer Project"}),(0,n.jsxs)(i.Inset,{last:!0,children:[(0,n.jsx)(E.O,{children:"The Project you are transferring is taking advantage of additional paid features only available to Vercel Teams."}),(0,n.jsx)(p.L,{}),(0,n.jsx)(E.O,{children:"The following features will be disabled once the project has been transferred to your Personal Account:"}),(0,n.jsx)(p.L,{}),(0,n.jsxs)(G.K,{gap:2,children:[h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(B.Z,{fill:!0,label:!1,type:"warning",variant:"contrast",children:"Disabling Advanced Deployment Protection will remove access to password protection, protection bypass for automation and private production deployments."}),(0,n.jsx)(p.L,{})]}):null,c?(0,n.jsx)(M.x,{color:"accents-6",children:(0,n.jsx)("b",{children:"–\xa0 Concurrent Builds"})}):null,h?(0,n.jsx)(M.x,{color:"accents-6",children:(0,n.jsx)("b",{children:"–\xa0 Advanced Deployment Protection"})}):null,u?(0,n.jsx)(M.x,{color:"accents-6",children:(0,n.jsx)("b",{children:"–\xa0 Preview Deployment Suffix"})}):null]})]})]}),(0,n.jsxs)(i.Actions,{children:[(0,n.jsx)(i.Action,{onClick:()=>r({type:"BACK"}),type:"secondary",children:"Back"}),(0,n.jsx)(i.Action,{buttonType:"submit",children:"Continue"})]})]})}},V=[y.Ss.GATHER_DEPS,y.Ss.BILLING];function $(e,r){switch(r.type){case"SET_STEP":return{...e,step:r.step,history:V.includes(r.step)?e.history:[...e.history,r.step]};case"BACK":{let r=e.history;return e.history[e.history.length-1]===e.step&&(r=e.history.slice(0,-1)),{...e,step:r[r.length-1],history:r}}case"SET_DESTINATION":return{...e,destinationId:r.id};case"RESET":return y.E3;case"UPDATE":return{...e,...r.state};case"TOGGLE_BUILDS":return{...e,paidFeatures:{...e.paidFeatures,concurrentBuilds:!e.paidFeatures.concurrentBuilds}};case"TOGGLE_PASSWORD":return{...e,paidFeatures:{...e.paidFeatures,passwordProtection:!e.paidFeatures.passwordProtection}};case"TOGGLE_SUFFIX":return{...e,paidFeatures:{...e.paidFeatures,previewDeploymentSuffix:!e.paidFeatures.previewDeploymentSuffix}};default:throw Error("Unsupported reducer action type")}}var K=e=>{let{active:r,onClose:t,options:a={redirectOnSuccess:!0}}=e,c=(0,o.U)(),d=null==c?void 0:c.project,[u,h]=(0,s.useReducer)($,y.E3),{data:p}=(0,l.PY)(d),x=p||a.project,j=U[u.step],f=(0,s.useCallback)(()=>{t()},[t]);if(!j)throw Error(`No component for step "${u.step}"`);return(0,n.jsx)(y.CF.Provider,{value:[u,h],children:(0,n.jsx)(i.Modal,{active:r,onClickOutside:f,width:480,children:(0,n.jsx)(j,{close:f,options:a,project:x})})})}}}]);