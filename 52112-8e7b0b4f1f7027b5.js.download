(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52112],{152112:function(e,t,i){"use strict";i.d(t,{m:function(){return ep},b:function(){return ef}});var s=i(397458),l=i(652983),n=i(14517),d=i(375453),a=i(253576),r=i(513764),o=i(46838),u=i(614029),c=i(106193);i(155593);var p=i(23669),f=i(838739),v=i(678673),x=i(115633),_=i(537559),h=i(295434),E=i.n(h);function b(e){let{currentStep:t,steps:i,className:d}=e,a=(0,l.useRef)(null),[r,u]=(0,l.useState)({top:0,left:0});return(0,l.useEffect)(()=>{a.current&&u({top:a.current.offsetTop,left:a.current.offsetLeft})},[t]),(0,s.jsxs)(o.K,{className:(0,n.W)(d,E()["step-indicator"]),direction:"row",gap:1,children:[(0,s.jsx)("span",{"aria-hidden":!0,className:(0,n.W)(E().circle,E().current),style:r}),i.map((e,i)=>(0,s.jsx)("span",{"aria-hidden":!0,className:E().circle,ref:i===t?a:void 0},e.key)),(0,s.jsxs)("span",{className:"geist-sr-only",children:["Step ",t+1," of ",i.length]})]})}var y=i(502881);let m=(0,l.createContext)({accountId:void 0,cancel:()=>void 0,dataTestIdContext:[],dispatch:()=>void 0,hasMultipleSteps:!1,invalidFields:[],originalSteps:[],setInvalidFields:()=>void 0,setStatus:()=>void 0,status:"idle",submit:()=>Promise.resolve(),surveyState:null,team:null,updateCookie:()=>void 0,user:null});var S=i(755906),I=i(815666),k=i.n(I);function g(e){let{id:t,onAction:i,surveyName:n,updateCookie:d}=e,a=(0,x.e1)(),r=()=>{a.removeToastByKey(t)};(0,l.useEffect)(()=>{f.co.track(f.s6.SURVEY_TOAST_SHOWN,{surveyName:n})},[n]);let c=()=>{f.co.track(f.s6.SURVEY_TOAST_DISMISSED,{surveyName:n}),d(),r()};return(0,s.jsxs)(o.K,{className:k().prompt,gap:4,children:[(0,s.jsxs)(o.K,{direction:"row",children:[(0,s.jsx)(u.x,{as:"h1",size:16,weight:500,children:"Help us improve your Vercel experience"}),(0,s.jsx)(p.z,{"aria-label":"dismiss",className:k()["close-button"],onClick:c,svgOnly:!0,variant:"unstyled",children:(0,s.jsx)(S.X,{weight:"bold"})})]}),(0,s.jsx)(u.x,{className:k().description,children:"Please help us better understand how we can improve your Vercel experience with this 2 minute survey."}),(0,s.jsxs)(o.K,{direction:"row",gap:2,justify:"end",children:[(0,s.jsx)(p.z,{onClick:c,size:"small",type:"secondary",children:"No Thanks"}),(0,s.jsx)(p.z,{onClick:()=>{i(),r()},size:"small",children:"Start"})]})]})}var T=i(260388),j=i.n(T),N=i(782508),F=i(437296);function C(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return(0,F.C)("survey-modal",e,...i)}let D=e=>{let t=[],i={},s=[],l={},{surveyName:n,surveySlug:d,surveySteps:a}=e,r=0;for(let e=0;e<a.length;e++){let n=a[e];for(let d of(s[e]={title:n.title,description:n.description,start:r,end:r+1},n.fields))if("select"===d.type){switch(d.as){case"dropdown":l[d.id]={as:"dropdown",id:d.id,start:r,end:r+1,label:d.label??""};break;case"combobox":l[d.id]={as:"combobox",id:d.id,start:r,end:r+1,label:d.label??""};break;default:l[d.id]={as:d.as??"checkbox",id:d.id,start:r,end:r+1,selectMultiple:!!d.selectMultiple}}for(let n of d.options){let a=`${e}-${d.id}-${n.id}`,o={fqid:a,stepIndex:e,inputId:n.id,selectListId:d.id,label:n.label,selected:!!n.selected,type:"option",reveals:n.reveals?{fqid:`${a}-${n.reveals.id}`,stepIndex:e,inputId:n.reveals.id,label:n.reveals.label??"",value:n.reveals.value??"",size:n.reveals.size??"short",validationRegex:n.reveals.validationRegex,validationErrorMessage:n.reveals.validationErrorMessage,inputTypeName:n.reveals.inputTypeName,type:"text"}:void 0};t.push(o),i[a]=r,s[e].end=r+1,l[d.id].end=r+1,r++}}else{let l=`${e}-${d.id}`,n={fqid:l,stepIndex:e,inputId:d.id,label:d.label,value:d.value||"",size:d.size||"short",validationRegex:d.validationRegex,validationErrorMessage:d.validationErrorMessage,inputTypeName:d.inputTypeName,type:"text"};t.push(n),i[l]=r,s[e].end=r+1,r++}}return{surveyName:n,surveySlug:d,fields:t,fieldLookup:i,stepLookup:s,selectListLookup:l,currentStep:0,previousStep:null,lastStep:a.length-1,isFirstStep:!0,isLastStep:a.length-1==0}},q=e=>{let{enableSkip:t=!1}=e;return{...D(e.surveyInfo),focusedItem:null,focusedField:null,focusedNestedField:null,focusedButton:null,backButtonExists:!1,skipButtonExists:t,submitButtonExists:!0,enableSkip:t}},L=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var w=i(811556),O=i.n(w),U=i(240930),P=i(977157),M=i(536619),R=i.n(M),A=i(18436),B=i.n(A),G=i(563790),K=i(61292);function $(e){let{type:t,optionFqid:i,field:n,className:d,"data-testid":a,showLabel:r,...o}=e,{setInvalidFields:u,invalidFields:c,surveyState:p,dispatch:f}=(0,l.useContext)(m),{fqid:v,inputId:x,inputTypeName:_,label:h,size:E="short",value:b,validationErrorMessage:y,validationRegex:S}=n,{focusedField:I,focusedNestedField:k}=p,g=(0,l.useRef)(null),T=(0,l.useRef)(null),[j,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{c.includes(v)?j||u(c.filter(e=>e!==v)):j&&u([...c,v])},[j,v,u]),(0,l.useEffect)(()=>{if("top-level"===t?(null==I?void 0:I.fqid)===v:(null==k?void 0:k.fqid)===v){var e;null===(e=g.current??T.current)||void 0===e||e.focus()}},[null==I?void 0:I.fqid,null==k?void 0:k.fqid,v,t]);let F=()=>{"top-level"===t&&(null==I?void 0:I.fqid)!==v?f({type:"SET_FOCUSED_FIELD",fqid:v}):"nested"===t&&(null==k?void 0:k.fqid)!==v&&f({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:i})},C=e=>{"nested"===t?f({type:"UPDATE_NESTED_TEXT_FIELD",optionFqid:i,value:e.target.value}):f({type:"UPDATE_TEXT_FIELD",fqid:v,value:e.target.value}),b?L(e.target.value):N(!1)},D=e=>{let s=e.target;"nested"===t?f({type:"UPDATE_NESTED_TEXT_FIELD",optionFqid:i,value:e.target.value}):f({type:"UPDATE_TEXT_FIELD",fqid:v,value:e.target.value}),j&&L(s.value)},q=y??(_?({email:"Please enter a valid email.",url:"Please enter a valid URL."})[_]:void 0),L=e=>{let t;if(S&&y)t=S;else switch(_){case"email":t=/^\S+@\S+\.\S+$/;break;case"url":N(!B()(e));return}t&&N(!t.test(e))};return"short"===E?(0,s.jsx)(G.I,{"aria-label":h,autoComplete:"off",className:d,"data-testid":a,id:x,label:r?h:void 0,maxLength:256,onBlur:C,onChange:D,onFocus:F,placeholder:r?void 0:h||"Add your answer...",...o,error:j?q:void 0,ref:g,typeName:_,value:b}):(0,s.jsx)(K.g,{"aria-label":h,className:d,"data-testid":a,id:x,label:r?h:void 0,maxLength:512,onBlur:C,onChange:D,onFocus:F,placeholder:r?void 0:h||"Add your answer...",rows:3,...o,error:j?q:void 0,ref:T,value:b})}function Z(e){let{index:t,listId:i,option:r,dataTestIdContext:c=[]}=e,[p,{height:f}]=(0,d.Z)(),v=(0,l.useRef)(null),{surveyState:x,dispatch:_}=(0,l.useContext)(m),{focusedField:h,focusedNestedField:E,selectListLookup:b}=x,{selectMultiple:y}=function(e){if("checkbox"!==e.as)throw Error(`Expected a checkbox select list, but got a ${e.as} select list instead.`);return e}(b[r.selectListId]),S=r.selected&&r.reveals,I=!!r.reveals,k=(null==h?void 0:h.fqid)===r.fqid,g="30px";(0,l.useEffect)(()=>{if(k&&null===E){var e;null===(e=v.current)||void 0===e||e.focus()}},[E,k,r.fqid]);let[T,j]=(0,a.useSpring)(()=>({config:{...a.config.default,clamp:!0},height:S?`${f}px`:g}),[S]);return(0,l.useEffect)(()=>{S?j.start({height:`${f}px`,onStart:()=>{_({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:r.fqid})}}):I&&j.start({height:g,onStart:()=>{_({type:"SET_FOCUSED_FIELD",fqid:r.fqid})}})},[I,_,f,S,k,r.fqid,j]),(0,s.jsxs)("li",{"aria-checked":r.selected,"aria-labelledby":r.inputId,"aria-selected":r.selected,className:(0,n.W)(R().option,{[R().selected]:r.selected}),"data-testid":C("form-input",i,"checkbox",r.inputId,...c),id:L[t],onClick:e=>{k||_({type:"SET_FOCUSED_FIELD",fqid:r.fqid});let t=e.target;t.dataset.reveal&&t.focus(),"INPUT"!==t.tagName&&_({type:"TOGGLE_OPTION",fqid:r.fqid})},onFocus:()=>{k||_({type:"SET_FOCUSED_FIELD",fqid:r.fqid})},onKeyDown:void 0,ref:v,role:"option",tabIndex:0,value:r.inputId,children:[y?(0,s.jsx)("input",{"aria-readonly":!0,checked:r.selected,className:R().input,"data-list-id":i,id:r.inputId,readOnly:!0,type:"checkbox",value:r.label||""}):(0,s.jsx)("input",{checked:r.selected,className:R().input,"data-list-id":i,id:r.inputId,readOnly:!0,type:"radio",value:r.label||""}),(0,s.jsx)(a.animated.div,{style:void 0,children:(0,s.jsxs)(o.K,{gap:3,ref:p,children:[(0,s.jsxs)("div",{className:R().heading,children:[(0,s.jsx)(P.Z,{"aria-hidden":!0,className:R().keyboard,children:L[t]}),(0,s.jsx)(u.x,{weight:500,children:(0,s.jsx)("label",{htmlFor:r.inputId,children:r.label})}),r.selected?(0,s.jsx)("span",{"aria-hidden":!0,className:R()["selected-icon"],children:(0,s.jsx)(U.I,{color:"var(--geist-success)",fill:!0})}):null]}),r.reveals?(0,s.jsx)("div",{className:(0,n.W)({[R().hidden]:!r.selected}),children:(0,s.jsx)($,{"data-testid":C("form-input",i,"checkbox",r.inputId,"revealed-textbox",...c),field:r.reveals,optionFqid:r.fqid,type:"nested"})}):null]})})]},r.inputId)}function z(e){let{id:t,options:i,selectMultiple:n,dataTestIdContext:d=[]}=e,{surveyState:a,dispatch:r}=(0,l.useContext)(m),{focusedField:u,focusedNestedField:c}=a,p=(0,l.useCallback)(e=>{var t,s,l,n;let d=i.findIndex(e=>e.fqid===(null==u?void 0:u.fqid)),a=null!==c;switch(e.key){case"ArrowUp":e.preventDefault(),-1===d?r({type:"SET_FOCUSED_FIELD",fqid:i[0].fqid}):r({type:"SET_FOCUSED_FIELD",fqid:(null===(t=i.at(d-1))||void 0===t?void 0:t.fqid)??null});break;case"ArrowDown":e.preventDefault(),-1===d?r({type:"SET_FOCUSED_FIELD",fqid:i[0].fqid}):r({type:"SET_FOCUSED_FIELD",fqid:(null===(s=i.at(d+1))||void 0===s?void 0:s.fqid)??(null===(l=i.at(0))||void 0===l?void 0:l.fqid)??null});break;case" ":if(-1===d||a)return;e.preventDefault(),r({type:"TOGGLE_OPTION",fqid:i[d].fqid});break;default:if(L.includes(e.key)){if(a)return;let t=null===(n=i[L.indexOf(e.key)])||void 0===n?void 0:n.fqid;t&&(r({type:"TOGGLE_OPTION",fqid:t}),r({type:"SET_FOCUSED_FIELD",fqid:t}))}}},[i,c,null==u?void 0:u.fqid,r]);return(0,s.jsx)(o.K,{"aria-label":"Options","aria-multiselectable":n,as:"ul",className:O().list,"data-testid":C("form-input",t,...d),gap:2,onKeyDown:p,role:"listbox",children:i.map((e,i)=>(0,s.jsx)(Z,{dataTestIdContext:d,index:i,listId:t,option:e},e.inputId))})}var V=i(632658);function W(e){let{id:t,options:i,dataTestIdContext:n=[]}=e,{surveyState:d,dispatch:a}=(0,l.useContext)(m),{selectListLookup:r}=d,u=function(e){if("dropdown"!==e.as)throw Error(`Expected a dropdown select list, but got a ${e.as} select list instead.`);return e}(r[i[0].selectListId]),{label:c}=u,p=(0,l.useRef)(null),f=(0,l.useMemo)(()=>i.find(e=>e.selected),[i]);return(0,s.jsxs)(o.K,{gap:4,role:"group",children:[(0,s.jsx)(V.P,{"aria-label":c,"data-testid":C("form-input",t,...n),defaultValue:null==f?void 0:f.inputId,id:u.id,onChange:e=>{let t=c?e.target.selectedIndex-1:e.target.selectedIndex;a({type:"TOGGLE_OPTION",fqid:i[t].fqid}),a({type:"SET_FOCUSED_FIELD",fqid:i[t].fqid})},onFocus:()=>{a({type:"SET_FOCUSED_FIELD",fqid:(null==f?void 0:f.fqid)??i[0].fqid})},placeholder:c,children:i.map(e=>(0,s.jsx)("option",{"aria-selected":e.selected,selected:e.selected,value:e.inputId,children:e.label},e.inputId))}),(null==f?void 0:f.reveals)?(0,s.jsx)($,{"data-testid":C("form-input",u.id,"dropdown",f.inputId,"revealed-textbox",...n),field:f.reveals,optionFqid:f.fqid,ref:p,type:"nested"}):null]})}var Y=i(318866),X=i(154e3);function H(e){let{id:t,options:i,dataTestIdContext:n=[]}=e,{surveyState:d,dispatch:a}=(0,l.useContext)(m),{selectListLookup:r}=d,u=function(e){if("combobox"!==e.as)throw Error(`Expected a combobox select list, but got a ${e.as} select list instead.`);return e}(r[i[0].selectListId]),{label:c}=u,p=(0,l.useMemo)(()=>i.find(e=>e.selected),[i]);return(0,s.jsxs)(o.K,{gap:2,children:[(0,s.jsxs)(Y.Z,{"data-testid":C("form-input",t,...n),onChange:e=>{if(!e){p&&a({type:"TOGGLE_OPTION",fqid:p.fqid});return}let t=i.findIndex(t=>t.inputId===e),s=i[t];(null==p?void 0:p.fqid)!==s.fqid&&(p&&a({type:"TOGGLE_OPTION",fqid:p.fqid}),s.reveals&&a({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:s.fqid}),a({type:"TOGGLE_OPTION",fqid:i[t].fqid}))},placeholder:c,value:null==p?void 0:p.inputId,children:[(0,s.jsx)(X.Z,{value:c}),(0,s.jsx)(Y.Z.Input,{}),(0,s.jsx)(Y.Z.List,{children:i.map(e=>(0,s.jsx)(Y.Z.Option,{"aria-selected":e.selected,value:e.inputId,children:e.label},e.inputId))})]}),(null==p?void 0:p.reveals)?(0,s.jsx)($,{"data-testid":C("form-input",u.id,"combobox",p.inputId,"revealed-textbox",...n),field:p.reveals,optionFqid:p.fqid,type:"nested"}):null]})}function J(e){let{showInputLabels:t,dataTestIdContext:i=[]}=e,{surveyState:n}=(0,l.useContext)(m),{fields:d,selectListLookup:a,stepLookup:r,currentStep:u}=n,{start:c,end:p}=r[u],f=d.slice(c,p),v=[];for(let e=0;e<f.length;e++){let t=f[e];if("text"===t.type&&v.push(t),"option"===t.type){let{start:i,end:s}=a[t.selectListId],l=d.slice(i,s);v.push(l),e=s-c-1}}return(0,s.jsx)(o.K,{gap:6,children:v.map(e=>{if(Array.isArray(e)){let t=a[e[0].selectListId].as;return"dropdown"===t?(0,s.jsx)("div",{children:(0,s.jsx)(W,{dataTestIdContext:i,id:e[0].selectListId,options:e})},e[0].selectListId):"combobox"===t?(0,s.jsx)("div",{children:(0,s.jsx)(H,{id:e[0].selectListId,options:e})},e[0].selectListId):(0,s.jsx)("div",{children:(0,s.jsx)(z,{dataTestIdContext:i,id:e[0].selectListId,options:e})},e[0].selectListId)}return(0,s.jsx)("div",{children:(0,s.jsx)($,{"data-testid":C("form-input",e.inputId,...i),field:e,showLabel:t,type:"top-level"},e.inputId)},e.inputId)})})}var Q=i(71607),ee=i.n(Q),et=i(244140),ei=i(609641),es=i(198667);let el=(0,es.ZP)((e,t)=>{var i;switch(t.type){case"RESET_SURVEY_INFO":return{...D(t.surveyInfo),focusedItem:null,focusedField:null,focusedNestedField:null,focusedButton:null,backButtonExists:!1,skipButtonExists:e.enableSkip,submitButtonExists:!0,enableSkip:e.enableSkip};case"TOGGLE_SKIP_ENABLED":e.enableSkip=t.enableSkip;break;case"SET_FOCUSED_BUTTON":e.focusedItem={type:"button",buttonId:t.buttonId};break;case"SET_FOCUSED_FIELD":e.focusedItem=t.fqid?{type:"field",fqid:t.fqid}:null;break;case"SET_FOCUSED_NESTED_FIELD":{let i=e.fields[e.fieldLookup[t.optionFqid]];"option"===i.type&&i.reveals&&(e.focusedItem={type:"nested-field",optionFqid:t.optionFqid,nestedFqid:i.reveals.fqid});break}case"INCREMENT_STEP":e.currentStep<e.lastStep&&(e.previousStep=e.currentStep,e.currentStep++,e.focusedItem=null);break;case"DECREMENT_STEP":e.currentStep>0&&(e.previousStep=e.currentStep,e.currentStep--,e.focusedItem=null);break;case"SET_STEP":t.to>=0&&t.to<=e.lastStep&&(e.previousStep=e.currentStep,e.currentStep=t.to,e.focusedItem=null);break;case"UPDATE_TEXT_FIELD":{let i=e.fields[e.fieldLookup[t.fqid]];"text"===i.type&&(i.value=t.value);break}case"UPDATE_NESTED_TEXT_FIELD":{let i=e.fields[e.fieldLookup[t.optionFqid]];"option"===i.type&&i.reveals&&(i.reveals.value=t.value);break}case"TOGGLE_OPTION":{let i=e.fields[e.fieldLookup[t.fqid]];if("option"===i.type){let t=e.selectListLookup[i.selectListId],{start:s,end:l}=t;if("checkbox"===t.as&&t.selectMultiple)i.selected=!i.selected;else{let t=i.selected;for(let t of e.fields.slice(s,l))"option"===t.type&&t.selectListId===i.selectListId&&(t.selected=!1);i.selected=!t}}break}default:(0,N._)(t)}switch(e.isFirstStep=0===e.currentStep,e.isLastStep=e.currentStep===e.lastStep,e.skipButtonExists=e.isFirstStep&&e.enableSkip,e.backButtonExists=!e.isFirstStep,null===(i=e.focusedItem)||void 0===i?void 0:i.type){case"field":e.focusedField=e.fields[e.fieldLookup[e.focusedItem.fqid]],e.focusedNestedField=null,e.focusedButton=null;break;case"nested-field":{let t=e.fields[e.fieldLookup[e.focusedItem.optionFqid]];"option"===t.type&&t.reveals&&(e.focusedField=t,e.focusedNestedField=t.reveals,e.focusedButton=null);break}case"button":e.focusedField=null,e.focusedNestedField=null,e.focusedButton=e.focusedItem.buttonId;break;case void 0:e.focusedField=null,e.focusedNestedField=null,e.focusedButton=null;break;default:(0,N._)(e.focusedItem)}});function en(e){let{children:t,...i}=e,{dataTestIdContext:n=[],showThankYouToast:d=!0,onDismiss:a=ee(),onSubmit:r,overrideTeamId:o,surveyInfo:u}=i,{surveySteps:c}=u,p=c.length>1,[f,_]=(0,l.useReducer)(el,q(i)),{surveyName:h,surveySlug:E,isLastStep:b,fields:y}=f,[S,I]=(0,l.useState)("idle"),[k,g]=(0,l.useState)([]),{team:T,teams:j,user:F}=(0,et.Z)(),C=(0,l.useMemo)(()=>(null==j?void 0:j.find(e=>e.id===o))??T,[o,T,j]),D=null==C?void 0:C.id,L=null==F?void 0:F.uid,w=D??L,O=(0,x.e1)(),U=(0,v.ej)(E),P=!!L&&(null==U?void 0:U.includes(L)),M=(0,l.useCallback)(()=>{L&&(U?P||(0,v.d8)(E,`${U},${L}`):(0,v.d8)(E,L))},[P,U,E,L]),R=(0,l.useCallback)(()=>{ei.co.track(ei.s6.SURVEY_EXITED,{surveyName:h}),a()},[a,h]),A=(0,l.useCallback)(async()=>{if(!b)return;I("submitting"),ei.co.track(ei.s6.SURVEY_SUBMITTED,{surveyName:h});let e=y.some(e=>{switch(e.type){case"option":if(e.selected)return!0;return!1;case"text":if(e.value)return!0;return!1;default:return(0,N._)(e)}});e||ei.co.track(ei.s6.SURVEY_SUBMITTED_EMPTY,{surveyName:h}),M();try{let e=function(e){let{fields:t,stepLookup:i,selectListLookup:s}=e,l=Object.values(i).map(e=>({title:e.title,description:e.description,fields:[]}));for(let e=0;e<t.length;e++){let i=t[e];switch(i.type){case"text":l[i.stepIndex].fields.push({...i,id:i.inputId});break;case"option":{let n=s[i.selectListId],{start:d,end:a}=n,r=t.slice(d,a),o=r.map(e=>{if("text"===e.type)throw Error("Somehow, a text field was added to an option list. This is likely a developer error.");let t={id:e.inputId,label:e.label,selected:e.selected};return e.reveals&&(t.reveals={id:e.reveals.inputId,...e.reveals}),t}),u={type:"select",id:i.selectListId,options:o};"checkbox"===n.as&&(u.selectMultiple=n.selectMultiple),l[i.stepIndex].fields.push(u),e=a-1}break;default:(0,N._)(i)}}return l}(f);await r({surveyName:h,surveySlug:E,user:F??void 0,team:C??void 0,surveySteps:e,get fields(){return e.flatMap(e=>e.fields)}})}finally{I("idle"),d&&O.success({text:"Thank you for your feedback."})}},[b,h,y,M,f,r,E,F,C,d,O]);return(0,s.jsx)(m.Provider,{value:{accountId:w,cancel:R,dataTestIdContext:n,dispatch:_,hasMultipleSteps:p,invalidFields:k,originalSteps:c,setInvalidFields:g,setStatus:I,status:S,submit:A,surveyState:f,team:C,updateCookie:M,user:F},children:t})}var ed=i(579955),ea=i.n(ed);function er(e){let{onAction:t,title:i="Help Shape the Future of\xa0Vercel",ctaText:l="Get Started",description:n="Please help us better understand how we can improve your Vercel experience with this 2 minute survey."}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Body,{children:(0,s.jsxs)(o.K,{gap:6,children:[(0,s.jsx)(c.Title,{children:i}),(0,s.jsx)(u.x,{align:"left",className:ea().text,size:16,children:n})]})}),(0,s.jsx)(c.Actions,{children:(0,s.jsx)(c.Action,{fullWidth:!0,onClick:t,children:l})})]})}function eo(e){let{isModal:t=!1,externalProps:i}=e,{dispatch:r,submit:p,surveyState:v,team:x,user:h}=(0,l.useContext)(m),{className:E,dataTestIdContext:b=[],enableSkip:S=!1,noPadding:I=!1,onSkip:k,onSubmitted:g,showInputLabels:T=!1,stackButtons:N=!1,submitButtonText:F="Submit"}=i,{currentStep:D,focusedField:q,focusedItem:L,isLastStep:w,previousStep:O,stepLookup:U,surveyName:P}=v,{surveySteps:M}=function(e,t){if(t&&1!==e.surveySteps.length)throw Error(`Can only stack buttons for single-step surveys. Your survey has ${e.surveySteps.length} steps.'`);return e}(i.surveyInfo,N),{title:R,description:A}=U[D];(0,l.useEffect)(()=>{r({type:"TOGGLE_SKIP_ENABLED",enableSkip:S})},[r,S]),(0,l.useEffect)(()=>{r({type:"RESET_SURVEY_INFO",surveyInfo:i.surveyInfo})},[r,i.surveyInfo]);let B=null==h?void 0:h.uid,G=null==x?void 0:x.id;(0,l.useEffect)(()=>{(B||G)&&(f.co.track(f.s6.SURVEY_STARTED,{surveyName:P,teamId:G,userId:B}),r({type:"SET_STEP",to:0}))},[r,P,G,B]);let K=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=e=>{K.current&&!K.current.contains(e.target)&&r({type:"SET_FOCUSED_FIELD",fqid:null})};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r]),(0,l.useEffect)(()=>{if(null===L){var e;null===(e=document.activeElement)||void 0===e||e.blur()}},[L]);let[$,Z]=(0,l.useState)();(0,l.useEffect)(()=>{let e=new Set;M.forEach(t=>{t.fields.forEach(t=>{if(e.has(t.id)&&Z(`Duplicate top-level field id: ${t.id}`),e.add(t.id),"options"in t){let e=new Set;t.options.forEach(t=>{e.has(t.id)&&Z(`Duplicate option id: ${t.id}`),e.add(t.id)})}})})},[M]);let z=(0,l.useCallback)(function(e){switch(e.key){case"Enter":if(!(0,_.x)(e))return;w?p():(e.preventDefault(),r({type:"INCREMENT_STEP"}));break;case"ArrowRight":(null==q?void 0:q.type)!=="text"&&r({type:"INCREMENT_STEP"});break;case"ArrowLeft":(null==q?void 0:q.type)!=="text"&&r({type:"DECREMENT_STEP"})}},[r,null==q?void 0:q.type,w,p]);(0,l.useEffect)(()=>(window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)),[z]),(0,l.useEffect)(()=>{null!==O&&f.co.track(f.s6.SURVEY_MODAL_STEP_CHANGED,{startIndex:O,endIndex:D,surveyName:P})},[D,P]);let[V,{height:W}]=(0,d.Z)(),[Y,X]=(0,a.useSpring)(()=>({config:{...a.config.default,clamp:!0},height:void 0}),[D]);return(0,l.useEffect)(()=>{W&&X.start({height:`${W}px`})},[D,X,W]),(0,s.jsxs)(o.K,{className:(0,n.W)(j().survey,E,{[j()["no-padding"]]:I,[j().modal]:t}),"data-testid":C("wrapper",...b),gap:8,ref:K,children:[(0,s.jsx)(a.animated.div,{style:t?void 0:Y,children:(0,s.jsxs)("form",{"data-testid":C("form",...b),onSubmit:e=>{e.preventDefault()},title:P,children:[(0,s.jsx)("h1",{className:"geist-sr-only",children:P}),(0,s.jsxs)("fieldset",{children:[(0,s.jsxs)("legend",{className:"geist-sr-only",children:["Step ",D+1]}),(0,s.jsxs)(o.K,{gap:6,ref:V,children:[R||A?(0,s.jsx)(o.K,{align:"center",className:j().header,gap:2,children:t?(0,s.jsxs)(s.Fragment,{children:[R?(0,s.jsx)(c.Title,{children:R}):void 0,A?(0,s.jsx)(c.Subtitle,{children:"string"==typeof A?(0,y.t)(A):A}):null]}):(0,s.jsxs)(s.Fragment,{children:[R?(0,s.jsx)(u.x,{as:"h1",className:j().title,children:R}):void 0,A?(0,s.jsx)(u.x,{className:j().description,children:"string"==typeof A?(0,y.t)(A):A}):null]})}):null,(0,s.jsx)(J,{dataTestIdContext:b,showInputLabels:T})]})]})]})}),null,t?null:(0,s.jsx)(eu,{onSkip:k,onSubmitted:g,stack:N,submitButtonText:F})]})}function eu(e){let{onSkip:t,onSubmitted:i,stack:d,submitButtonText:a}=e,{cancel:c,dataTestIdContext:f,dispatch:v,invalidFields:x,originalSteps:_,status:h,submit:E,surveyState:y,hasMultipleSteps:S}=(0,l.useContext)(m),{backButtonExists:I,currentStep:k,fields:g,focusedButton:T,focusedField:N,isLastStep:F,selectListLookup:D,skipButtonExists:q,stepLookup:L}=y,w=(0,l.useRef)(null),O=(0,l.useRef)(null),U=(0,l.useRef)(null);(0,l.useEffect)(()=>{var e,t,i;switch(T){case"back":null===(e=w.current)||void 0===e||e.focus();break;case"skip":null===(t=O.current)||void 0===t||t.focus();break;case"submit":null===(i=U.current)||void 0===i||i.focus()}},[T]);let P=(null==N?void 0:N.type)==="option"&&"checkbox"===D[N.selectListId].as,M=(0,l.useMemo)(()=>_.map((e,t)=>({key:g[L[t].start].fqid})),[g,_,L]);return(0,s.jsxs)(o.K,{align:"center","aria-label":"Survey navigation controls",className:j().footer,direction:"row",gap:4,justify:I?"space-between":"flex-end",role:"group",children:[I?(0,s.jsx)(p.z,{"aria-label":"Back to previous step",className:(0,n.W)(j()["back-button"]),"data-testid":C("back-button",...f),onClick:()=>v({type:"DECREMENT_STEP"}),onFocus:()=>{"back"!==T&&v({type:"SET_FOCUSED_BUTTON",buttonId:"back"})},ref:w,svgOnly:!0,type:"ghost",typeName:"button",children:(0,s.jsx)(r.X,{"aria-label":"left-facing arrow",size:24})}):null,(0,s.jsxs)(o.K,{align:"center",className:(0,n.W)(j().info,{[j()["align-left"]]:!S}),justify:"center",children:[(0,s.jsx)(u.x,{className:(0,n.W)(j().tip,{[j().hidden]:!P}),color:"accents-6",weight:500,children:"Press a key to select or ↑↓ to navigate"}),(0,s.jsx)(b,{className:(0,n.W)(j()["step-indicator"],{[j().hidden]:!(S&&!P),[j().single]:!S}),currentStep:k,steps:M})]}),(0,s.jsxs)(o.K,{className:(0,n.W)(j().buttons,{[j().stacked]:d&&!S}),gap:4,children:[q?(0,s.jsx)(p.z,{className:(0,n.W)(j()["skip-button"]),"data-testid":C("skip-button",...f),onClick:()=>{null==t||t(),c()},onFocus:()=>{"skip"!==T&&v({type:"SET_FOCUSED_BUTTON",buttonId:"skip"})},ref:O,type:"secondary",children:"Skip"}):null,(0,s.jsx)(p.z,{"aria-label":F?"Submit survey":"Continue to next step",className:(0,n.W)(j()["submit-button"]),"data-testid":C(F?"submit-button":"next-button",...f),disabled:x.length>0,loading:F?"submitting"===h:void 0,onClick:()=>{F?E().then(i):v({type:"INCREMENT_STEP"})},onFocus:()=>{"submit"!==T&&v({type:"SET_FOCUSED_BUTTON",buttonId:"submit"})},ref:U,children:F?a:"Next"})]})]})}function ec(e){let{externalProps:t}=e,{active:i,dataTestIdContext:n=[],enableSkip:d=!1,hideIfAlreadySeen:a,onSkip:r,onSubmitted:o,prompt:u,promptWithToast:p,setActive:f,stackButtons:_=!1,submitButtonText:h="Submit",surveyInfo:E}=t,{surveySlug:b,surveyName:y}=E,{dispatch:S,user:I,updateCookie:k,cancel:T}=(0,l.useContext)(m),[j,N]=(0,l.useState)(u),F=(0,x.e1)(),D=(0,v.ej)(b),q=null!=I&&!!I.uid&&(null==D?void 0:D.includes(I.uid)),L=(0,l.useCallback)(()=>{f(!0)},[f]);(0,l.useEffect)(()=>{p&&F.loaded&&!q&&F.message({preserve:!0,text:(0,s.jsx)(g,{id:b,onAction:L,surveyName:y,updateCookie:k}),key:b})},[D,p,y,b,F,q,L,k]);let w=()=>{void 0===r?f(!1):r()},O=()=>{void 0===o?(f(!1),N(u)):o()},U=(0,l.useCallback)(e=>{var t;let i=null==e?void 0:e.target;(!i||(null===(t=i.offsetParent)||void 0===t?void 0:t.id)!=="cconsent-bar")&&d&&(f(!1),T())},[T,d,f]);return(0,s.jsxs)(c.Modal,{active:(!a||!q)&&i,"data-testid":C("modal",...n),drawerHeight:"auto",enableSkip:d,onAnimationDone:()=>{S({type:"SET_STEP",to:0})},onClickOutside:U,width:520,children:[i&&j?(0,s.jsx)(er,{onAction:()=>N(!1)}):null,i&&!j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Body,{padding:!1,children:(0,s.jsx)(eo,{externalProps:{onSkip:w,onSubmitted:O,...t},isModal:!0})}),(0,s.jsx)(c.Actions,{children:(0,s.jsx)(eu,{onSkip:w,onSubmitted:O,stack:_,submitButtonText:h})})]}):null]})}function ep(e){return(0,s.jsx)(en,{...e,children:(0,s.jsx)(eo,{externalProps:e})})}function ef(e){return(0,s.jsx)(en,{...e,children:(0,s.jsx)(ec,{externalProps:e})})}},61292:function(e,t,i){"use strict";i.d(t,{g:function(){return x}});var s=i(397458),l=i(652983),n=i(14517),d=i(154e3),a=i(434223),r=i(292165),o=i(605278),u=i(717146),c=i(155593),p=i(437296),f=i(830779),v=i.n(f);let x=(0,l.forwardRef)((e,t)=>{let{bypassLabelCasing:i=!1,disabled:l,label:f,resize:x,width:_,error:h,type:E,size:b,className:y,wrapperClassName:m,spellCheck:S=!1,autoCapitalize:I="off",autoComplete:k="off",autoCorrect:g="off",...T}=e,j=f?d.Z:"label",N={...f?{value:f,withInput:!0,wrapperClassName:m,bypassCasing:i}:{className:m}},F=(0,a.B)()||l,C=(0,r.M)("textarea-");E=h?"error":E;let D=(0,o.o)(E);return(0,s.jsxs)(j,{"data-version":"v1",...N,children:[(0,s.jsx)("div",{className:(0,n.W)(v().container,D),children:(0,s.jsx)("textarea",{...T,autoCapitalize:I,autoComplete:k,autoCorrect:g,className:(0,n.W)(v().textarea,D,{[v().large]:"large"===b,[v().small]:"small"===b},y),disabled:F,ref:t,spellCheck:S,style:{...T.style,resize:x,width:_}})}),h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.L,{y:.5}),(0,s.jsx)(c.Z,{"data-testid":T["data-testid"]?(0,p.C)(T["data-testid"],"error"):void 0,error:h,id:`${C}-error`,size:b,style:{width:_}})]}):null]})});x.displayName="Textarea",t.Z=(0,l.memo)(x)},537559:function(e,t,i){"use strict";i.d(t,{x:function(){return l}});var s=i(934530);let l=e=>(0,s.a)()?e.metaKey:e.ctrlKey},934530:function(e,t,i){"use strict";i.d(t,{Z:function(){return d},a:function(){return n}});let s=["Shift","Meta","Alt","Control"],l=["select","textarea","input"],n=()=>/Mac|iPod|iPhone|iPad/.test(navigator.platform);function d(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=Object.keys(t).map(e=>[function(e){let t=n()?"Meta":"Control";return e.trim().split(" ").map(e=>{let i=e.split("+"),s=i.pop();return[i=i.map(e=>"$mod"===e?t:e),s]})}(e),t[e]]),a=new Map,r=null,o=e=>{e.getModifierState&&e.getModifierState(e.key)||i.ignoreFocus&&document.activeElement&&(-1!==l.indexOf(document.activeElement.tagName.toLowerCase())||"true"===document.activeElement.contentEditable)||(d.forEach(t=>{let i=t[0],l=t[1],n=a.get(i)||i,d=n[0];d[1].toUpperCase()!==e.key.toUpperCase()&&d[1]!==e.code||d[0].find(t=>!e.getModifierState(t))||s.find(t=>!d[0].includes(t)&&e.getModifierState(t))?a.delete(i):n.length>1?a.set(i,n.slice(1)):(a.delete(i),l(e))}),clearTimeout(r),r=setTimeout(a.clear.bind(a),1e3))};return e.addEventListener("keydown",o),()=>{e.removeEventListener("keydown",o)}}},502881:function(e,t,i){"use strict";function s(e){let t=e.lastIndexOf(" ");return -1===t?e:`${e.substring(0,t)}\u00A0${e.substring(t+1)}`}i.d(t,{t:function(){return s}})},513764:function(e,t,i){"use strict";i.d(t,{X:function(){return l}});var s=i(427494);let l=(0,s.H1)('<path d="M19 12H5"/><path d="M12 19l-7-7 7-7"/>')},295434:function(e){e.exports={"step-indicator":"step-indicator_step-indicator__Un7Ug",circle:"step-indicator_circle__Bqytn",current:"step-indicator_current__rCq5V"}},536619:function(e){e.exports={option:"checkbox-option_option__sxhhQ",input:"checkbox-option_input__Uj8ca",hidden:"checkbox-option_hidden__td3Gb",heading:"checkbox-option_heading__xPNhN",keyboard:"checkbox-option_keyboard__xApST","selected-icon":"checkbox-option_selected-icon__e3BK5",selected:"checkbox-option_selected__VMmD5"}},811556:function(e){e.exports={list:"checkbox-select_list__fsAj4"}},815666:function(e){e.exports={prompt:"survey-prompt-toast_prompt__R0lvc","close-button":"survey-prompt-toast_close-button__lI3Z0",description:"survey-prompt-toast_description__d09Dm"}},579955:function(e){e.exports={text:"survey-prompt_text__MAh_3"}},260388:function(e){e.exports={survey:"survey_survey__LfPlG","no-padding":"survey_no-padding__O4aTe",modal:"survey_modal__uMeqY",header:"survey_header__VsZLP",title:"survey_title__bJ3Rx",description:"survey_description__pIUsS",footer:"survey_footer__uLjnQ",buttons:"survey_buttons__wceUg",stacked:"survey_stacked__cMxh9","back-button":"survey_back-button__w_WTC",info:"survey_info__S_BPD","align-left":"survey_align-left__Vm650",tip:"survey_tip__OuM4N",fadeIn:"survey_fadeIn__C93tY",hidden:"survey_hidden__ZZaKD","step-indicator":"survey_step-indicator___9h7F",single:"survey_single__SobSU","skip-button":"survey_skip-button__sDuqx","skip-text":"survey_skip-text__RNYgn","submit-button":"survey_submit-button__L1BxI"}},830779:function(e){e.exports={container:"textarea_container__vtOsN input_container__GHJdJ",textarea:"textarea_textarea__TwSUq input_input__WqafN",error:"textarea_error__I41iq undefined",small:"textarea_small__9oCZ2",large:"textarea_large__EAAt5"}}}]);