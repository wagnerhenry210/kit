(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68726],{852952:function(e,t,n){"use strict";n.d(t,{P:function(){return a},c:function(){return c}});var i=n(397458),r=n(652983),l=n(14517),s=n(737164),o=n.n(s);let a=e=>{let{title:t,children:n,className:s,...a}=e;return r.Children.count(n)?(0,i.jsxs)("details",{className:(0,l.W)(s,o().item),...a,children:[(0,i.jsx)("summary",{className:o().summary,children:(0,i.jsx)("div",{children:t})}),(0,i.jsx)("div",{className:o().content,children:n})]}):(0,i.jsx)("div",{className:o().childless,children:t})},c=e=>{let{children:t,className:n,...r}=e;return(0,i.jsx)("div",{className:(0,l.W)(n,o().subitem),...r,children:t})}},804523:function(e,t,n){"use strict";var i=n(397458),r=n(652983),l=n(23669);t.Z=(0,r.forwardRef)(function(e,t){let{placeholder:n,loading:r,children:s,noGap:o,noBorderRadius:a,onClick:c}=e;return n?(0,i.jsx)("div",{style:{marginTop:o?"0":"var(--geist-space-4x)",height:32}}):(0,i.jsx)(l.z,{loading:r,onClick:c,ref:t,style:{marginTop:o?0:"var(--geist-space-4x)",borderRadius:a?0:void 0},type:"secondary",width:"100%",children:s||"Load More"})})},746201:function(e,t,n){"use strict";n.d(t,{O:function(){return o},q:function(){return s}});var i=n(397458),r=n(591703),l=n(717146);let s=e=>{let{children:t,...n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.ZP,{Component:"h1",center:!0,h3:!0,noMargin:!0,...n,children:t}),(0,i.jsx)(l.L,{})]})},o=e=>{let{children:t,...n}=e;return(0,i.jsx)(r.ZP,{noMargin:!0,preset:"body-2",type:"secondary",...n,children:t})}},908752:function(e,t,n){"use strict";n.d(t,{CF:function(){return a},DR:function(){return l},E3:function(){return o},NE:function(){return f},Ss:function(){return s},r_:function(){return c},ui:function(){return u},wn:function(){return v}});var i=n(652983),r=n(244140);let l=20,s={DESTINATION_SELECT:"destination-select",CREATE_TEAM:"create-team",BILLING:"billing",PAID_FEATURES:"paid-features",REMOVE_PAID_FEATURES:"remove-paid-features",GATHER_DEPS:"gather-deps",OVERVIEW:"overview"},o={step:s.DESTINATION_SELECT,history:[s.DESTINATION_SELECT],destinationId:null,conflict:{hasConflict:!1},paidFeatures:{concurrentBuilds:!0,passwordProtection:!0,previewDeploymentSuffix:!0},transferData:null},a=(0,i.createContext)([o,()=>{}]),c=()=>(0,i.useContext)(a),u=()=>{let[{destinationId:e}]=c(),{teams:t,user:n}=(0,r.Z)();if(!e)return null;if(!e.startsWith("team_"))return n;let i=t&&t.find(t=>t.id===e)||null;return i},d=(e,t)=>{var n,i;if(!(null==e?void 0:null===(n=e.billing)||void 0===n?void 0:n.invoiceItems)||!(null==t?void 0:null===(i=t.billing)||void 0===i?void 0:i.invoiceItems))return{hasConflict:!1};let r={};for(let n of h){let i=e.billing.invoiceItems[n],l=t.billing.invoiceItems[n];if(!i||!i.quantity)continue;let s=(null==l?void 0:l.quantity)||0;i.quantity>s&&(r[n]={newAmount:i.quantity,difference:i.quantity-s,price:(null==l?void 0:l.price)||i.price})}return Object.keys(r).length?{hasConflict:!0,conflicts:r}:{hasConflict:!1}},h=["concurrentBuilds","passwordProtection","previewDeploymentSuffix"],v=e=>{var t;let{dispatch:n,isTeam:i,team:r,destinationAccount:l}=e;if(!l)return;let o=(null==l?void 0:null===(t=l.billing)||void 0===t?void 0:t.plan)==="enterprise";if(i){if(o)return n({type:"SET_STEP",step:s.GATHER_DEPS});let e=d(r,l);n({type:"UPDATE",state:{conflict:e}}),n(e.hasConflict?{type:"SET_STEP",step:s.PAID_FEATURES}:{type:"SET_STEP",step:s.GATHER_DEPS})}else n({type:"SET_STEP",step:s.GATHER_DEPS})},f=e=>{var t,n,i,r;let{team:l,dispatch:o}=e;if(!(null==l?void 0:null===(t=l.billing)||void 0===t?void 0:t.invoiceItems))return o({type:"SET_STEP",step:s.GATHER_DEPS});let a={};return(((null===(n=l.billing.invoiceItems.passwordProtection)||void 0===n?void 0:n.quantity)??0)>=1&&(a.passwordProtection=!0),((null===(i=l.billing.invoiceItems.previewDeploymentSuffix)||void 0===i?void 0:i.quantity)??0)>=1&&(a.previewDeploymentSuffix=!0),((null===(r=l.billing.invoiceItems.concurrentBuilds)||void 0===r?void 0:r.quantity)??0)>=2&&(a.concurrentBuilds=!0),Object.keys(a).length)?(o({type:"UPDATE",state:{conflict:{hasConflict:!0,conflicts:a}}}),o({type:"SET_STEP",step:s.REMOVE_PAID_FEATURES})):o({type:"SET_STEP",step:s.GATHER_DEPS})}},368726:function(e,t,n){"use strict";n.d(t,{Q:function(){return L}});var i=n(397458),r=n(652983),l=n(665759),s=n(878191),o=n(240930),a=n(122799),c=n(543865),u=n(717146),d=n(106193),h=n(303213),v=n(724543),f=n(591703),p=n(804523),m=n(563790),x=n(15129),j=n(852952),E=n(244140),g=n(881454),y=n(409146),T=n(251743),_=n(73796),w=n(44381),S=n(294541),I=n(25063),P=n(838739),b=n(632616),C=n(908752),A=n(13632),R=n.n(A),N=n(746201);t.Z=e=>{let{close:t,project:n,options:A}=e,{account:O,isTeam:Z}=(0,E.Z)(),[{transferData:H,conflict:$,paidFeatures:M},z]=(0,C.r_)(),F=(0,C.ui)(),U=(0,s.useRouter)(),[q,B]=(0,r.useState)(!1),[G,V]=(0,r.useState)((null==n?void 0:n.name)||""),[J,W]=(0,r.useState)(H?null:{message:"Transfer information not found, please go back and try again."}),[,{aliases:Y,loadMore:K,isLoadingMore:Q,isReachingEnd:X}]=(0,g.f)({project:n,limit:C.DR}),{data:ee}=(0,y.Z)(U.query.project),{data:et}=(0,I.Z)(U.query.project),en=!!(null==ee?void 0:ee.envs.some(e=>e.edgeConfigId)),ei=et&&et.integrations.length>0,er=(null==ee?void 0:ee.envs)?ee.envs.filter(e=>"secret"===e.type):[],el=(null==ee?void 0:ee.envs)?ee.envs.filter(e=>"secret"!==e.type):[],es=async e=>{var i,r,s;if(e&&e.preventDefault(),!F)return;if(!G)return W({message:"Please enter a new project name."});B(!0);try{return await (0,w.NU)({name:G,teamId:"id"in F?null==F?void 0:F.id:null}),B(!1),W({message:`Project "${G}" already exists, please use a new name.`})}catch(e){if((0,b.B)(e)&&404!==e.status)return B(!1),W({message:`Project "${G}" already exists, please use a new name.`})}let o=$.hasConflict?{concurrentBuilds:M.concurrentBuilds?(null===(i=$.conflicts.concurrentBuilds)||void 0===i?void 0:i.newAmount)??0:0,passwordProtection:!!M.passwordProtection&&null!==(r=$.conflicts.passwordProtection)&&void 0!==r&&!!r.newAmount,previewDeploymentSuffix:!!M.previewDeploymentSuffix&&null!==(s=$.conflicts.previewDeploymentSuffix)&&void 0!==s&&!!s.newAmount}:{};try{await (0,T.I)(`${(0,_.HJ)("v3")}/${n.name}/transfer${(0,S.c)({teamId:Z?O.id:void 0})}`,{method:"POST",body:JSON.stringify({toAccountId:"id"in F&&F.id||"uid"in F&&F.uid,newProjectName:G,paidFeatures:o}),throwOnHTTPError:!0}),en&&P.co.track(P.s6.PROJECT_TRANSFER_INITIATED_WITH_MISSING_EDGE_CONFIG),ei?P.co.track(P.s6.PROJECT_TRANSFER_INITIATED_WITH_MISSING_INTEGRATIONS):P.co.track(P.s6.PROJECT_TRANSFER_INITIATED),M.concurrentBuilds&&M.passwordProtection&&M.previewDeploymentSuffix?P.co.track(P.s6.PROJECT_TRANSFER_CONFIRMED_PAID_FEATURES):P.co.track(P.s6.PROJECT_TRANSFER_DECLINED_PAID_FEATURES)}catch(e){B(!1),W((0,l.SC)(e));return}setTimeout(()=>{if((null==A?void 0:A.redirectOnSuccess)??!0)U.push("/[teamSlug]/[project]?fromTransfer=1",`/${"slug"in F&&F.slug||"username"in F&&F.username}/${encodeURIComponent(G)}`);else{var e;null==A||null===(e=A.onSuccess)||void 0===e||e.call(A,n),t()}},1e3)};return(0,i.jsxs)("form",{onSubmit:es,children:[(0,i.jsxs)(d.Body,{children:[(0,i.jsx)(N.q,{children:"Transfer Project"}),(0,i.jsxs)(h.Z,{center:!0,row:!0,children:[(0,i.jsxs)(h.Z,{center:!0,flex:"0 0 40%",children:[(0,i.jsx)(v.qE,{hash:null==O?void 0:O.avatar,placeholder:!O,size:64,teamId:Z?null==O?void 0:O.id:null,username:Z?null:null==O?void 0:O.uid}),(0,i.jsx)(u.L,{className:"geist-hide-on-mobile",y:.5}),(0,i.jsx)(f.ZP,{className:"geist-ellipsis geist-hide-on-mobile",noMargin:!0,preset:"body-2",type:"secondary",weight:500,children:null==O?void 0:O.name})]}),(0,i.jsxs)(h.Z,{center:!0,children:[(0,i.jsx)(u.L,{inline:!0,x:.25}),L,(0,i.jsx)(u.L,{inline:!0,x:.25})]}),(0,i.jsxs)(h.Z,{center:!0,flex:"0 0 40%",children:[(0,i.jsx)(v.qE,{hash:null==F?void 0:F.avatar,placeholder:!F,size:64,teamId:F&&"id"in F&&F.id||void 0}),(0,i.jsx)(u.L,{className:"geist-hide-on-mobile",y:.5}),(0,i.jsx)(f.ZP,{className:"geist-ellipsis geist-hide-on-mobile",noMargin:!0,preset:"body-2",type:"secondary",weight:500,children:null==F?void 0:F.name})]})]}),(0,i.jsx)(u.L,{}),(0,i.jsxs)(d.Inset,{children:[(0,i.jsx)(m.I,{error:J||void 0,id:"new-project-name",label:"New Project Name",maxLength:100,onChange:e=>{W(null),V(e.target.value)},placeholder:null==n?void 0:n.name,spellCheck:!1,value:G}),(0,i.jsx)(u.L,{}),(0,i.jsx)(N.O,{children:(0,i.jsxs)(h.Z,{Component:"span",noWrap:!0,row:!0,children:[(0,i.jsx)(o.I,{color:"var(--geist-success)",fill:!0,size:20}),(0,i.jsx)(u.L,{inline:!0,x:1/3})," No downtime or workflow interruptions will be caused."]})}),en?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.L,{}),(0,i.jsx)(x.Z,{fill:!0,label:!1,type:"warning",variant:"contrast",children:"Edge Configs won't be transferred. Deployments of your project will fail until you connect it to an Edge Config in the target account."})]}):null,ei?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.L,{}),(0,i.jsx)(x.Z,{fill:!0,label:!1,type:"warning",variant:"contrast",children:"Integrations won't be transferred. They need to be added again after the transfer is complete."})]}):null]}),H?(0,i.jsxs)(d.Outset,{children:[(0,i.jsx)(D,{count:H.domains.length,title:(0,i.jsxs)("span",{children:[H.domains.length," ",1===H.domains.length?"Domain":"Domains"," will be transferred."]}),children:H.domains.map(e=>(0,i.jsxs)(k,{children:[(0,i.jsx)("span",{title:e.name,children:e.name}),(0,i.jsx)(a.o,{color:"var(--accents-6)",size:16}),(0,i.jsx)("span",{title:e.name,children:e.name})]},e.name))}),(0,i.jsxs)(D,{count:Y.length,title:(0,i.jsxs)("span",{children:[Y.length,Y.length===C.DR&&"+"," ",1===Y.length?"Alias":"Aliases"," will be transferred."]}),children:[Y.map(e=>(0,i.jsxs)(k,{children:[(0,i.jsx)("span",{title:e.alias,children:e.alias}),(0,i.jsx)(a.o,{color:"var(--accents-6)",size:16}),(0,i.jsx)("span",{title:e.alias,children:e.alias})]},e.alias)),Y.length===C.DR&&!X&&(0,i.jsxs)("div",{className:R().inset,children:[(0,i.jsx)(p.Z,{loading:Q,onClick:K}),(0,i.jsx)(u.L,{})]})]}),(0,i.jsx)(D,{count:er.length,title:(0,i.jsxs)("span",{children:[er.length," ",1===er.length?"Secret":"Secrets"," ","will be copied."]}),children:er.map((e,t)=>(0,i.jsxs)(k,{children:[(0,i.jsx)("span",{title:e.key,children:e.key}),(0,i.jsx)(c.C,{color:"var(--accents-6)",size:16}),(0,i.jsx)("span",{title:e.key,children:e.key})]},`secret-${e.key}-${t}`))}),(0,i.jsx)(D,{count:el.length??0,title:(0,i.jsxs)("span",{children:[el.length," Environment"," ",1===el.length?"Variable":"Variables"," will be transferred."]}),children:el.map(e=>(0,i.jsxs)(k,{children:[(0,i.jsx)("span",{title:e.key,children:e.key}),(0,i.jsx)(a.o,{color:"var(--accents-6)",size:16}),(0,i.jsx)("span",{title:e.key,children:e.key})]},e.id))}),(0,i.jsx)(j.P,{title:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:"All Deployments"})," will be transferred."]})}),(0,i.jsx)(u.L,{y:-1})]}):null]}),(0,i.jsxs)(d.Actions,{children:[(0,i.jsx)(d.Action,{disabled:q,onClick:()=>z({type:"BACK"}),type:"secondary",children:"Back"}),(0,i.jsx)(d.Action,{buttonType:"submit",loading:q,children:"Transfer"})]})]})};let D=e=>{let{title:t,count:n,children:r}=e;return 0===n?null:(0,i.jsx)(j.P,{title:t,children:(0,i.jsx)("div",{className:R().content,children:r})})},k=e=>{let{children:t}=e;return(0,i.jsx)(j.c,{className:R().subitem,children:t})},L=(0,i.jsxs)("svg",{fill:"var(--accents-5)",height:"20",viewBox:"0 0 66 20",width:"66",children:[(0,i.jsx)("path",{d:"M43 10c0 5.523-4.477 10-10 10s-10-4.477-10-10S27.477 0 33 0s10 4.477 10 10zM32.53 6.47a.75.75 0 10-1.06 1.06L33.94 10l-2.47 2.47a.75.75 0 101.06 1.06l3-3a.75.75 0 000-1.06l-3-3z"}),(0,i.jsx)("path",{d:"M.5 9.125v1h2.455v-1H.5zM4.864 9.125v1h3.909v-1h-3.91zM10.682 9.125v1h3.909v-1h-3.91zM16.5 9.125v1h3.91v-1H16.5zM45.59 9.125v1h3.91v-1h-3.91zM51.41 9.125v1h3.908v-1H51.41zM57.227 9.125v1h3.91v-1h-3.91zM63.045 9.125v1H65.5v-1h-2.455z"})]})},44381:function(e,t,n){"use strict";n.d(t,{NU:function(){return s},Sj:function(){return a},e5:function(){return o}}),n(878191);var i=n(73796),r=n(251743),l=n(294541);n(724868);let s=e=>{let{name:t,teamId:n}=e;return(0,r.Z)(`${i.VE}/${encodeURIComponent(t)}${(0,l.c)({teamId:n,deploymentInfo:0})}`,{throwOnHTTPError:!0})},o=e=>{let{id:t,teamId:n}=e;return(0,r.Z)(`${i.VE}/${t}${(0,l.c)({teamId:n})}`,{throwOnHTTPError:!0})},a=e=>(null==e?void 0:e.code)==="tarball_not_found"?"Your codebase could not be retrieved. Please check that your repository is not empty.":(null==e?void 0:e.keyword)==="additionalProperties"?"Additional property `"+e.params.additionalProperty+"` is not allowed. Please check the `vercel.json` or `now.json` file in your repository.":e.message||e.toString()},632616:function(e,t,n){"use strict";n.d(t,{B:function(){return s},X:function(){return o}});var i=n(665759),r=n(270093),l=n(213025);let s=e=>(0,r.x)(e)&&"code"in e;async function o(e){if(e.status>=200&&e.status<300)return e;let{type:t}=(0,l.Q)(e.headers.get("Content-Type")||"text/plain");if("application/json"===t){let t=await e.json();if("error"in t&&s(t.error))throw(0,i.SC)(t.error);if(s(t))throw(0,i.SC)(t)}if("text/plain"===t){let t=await e.text();throw(0,i.SC)(t)}throw Error(e.statusText)}},881454:function(e,t,n){"use strict";n.d(t,{Z:function(){return u},f:function(){return d}});var i=n(652983),r=n(296638),l=n(512959),s=n(251743),o=n(73796),a=n(294541),c=n(777717);function u(e){let{projectId:t,project:n,projectData:i,from:l,limit:u}=e,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{isReady:h,team:v}=(0,c.t7)();return(0,r.ZP)(()=>{let e=t||n.id||i.project.id;return h?`${o.sL}${(0,a.c)({projectId:e,teamId:null==v?void 0:v.id,from:l||null,limit:u})}`:null},e=>(0,s.I)(e,{throwOnHTTPError:!0}),{refreshInterval:d})}function d(e,t){var n;let{projectId:r,project:u,projectData:d,limit:h}=e,{isReady:v,team:f}=(0,c.t7)(),p=r||u.id||d.project.id,m=(0,l.ZP)((e,t)=>{if(!v)return null;let n={projectId:p,teamId:null==f?void 0:f.id,limit:h+1};if(!e)return`${o.sL}${(0,a.c)(n)}`;let i=(null==t?void 0:t.aliases.length)>h&&(null==t?void 0:t.pagination.next)||null;return i?`${o.sL}${(0,a.c)({...n,until:i})}`:null},e=>(0,s.I)(e,{throwOnHTTPError:!0}),t),x=(0,i.useMemo)(()=>m.data?[].concat(...m.data.map(e=>e.aliases.slice(0,h))):[],[m.data,h]),j=!!m.data,E=j&&0===x.length,g=j&&m.size>m.data.length,y=j&&(null===(n=m.data[m.data.length-1])||void 0===n?void 0:n.aliases.length)<=h;return[m,{aliases:x,initialDataLoaded:j,isEmpty:E,loadMore:()=>m.setSize(e=>e+1),isLoadingMore:g,isReachingEnd:y}]}},409146:function(e,t,n){"use strict";n.d(t,{W:function(){return u},Z:function(){return c}});var i=n(296638),r=n(251743),l=n(73796),s=n(294541),o=n(777717),a=n(475846);function c(e,t){let{isReady:n,team:l}=(0,o.t7)(),{can:s,isLoading:c}=(0,a.ZP)(),d=s(a.aU.Read,a._z.ProjectEnvVars),h=e&&n&&!c&&d;return(0,i.ZP)(()=>h?u(e,null==l?void 0:l.id):"",e=>(0,r.I)(e,{throwOnHTTPError:!0}),t)}function u(e,t){return`${(0,l.HJ)("v9")}/${encodeURIComponent(e)}/env${(0,s.c)({teamId:t})}`}},25063:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(296638),r=n(251743),l=n(73796),s=n(294541),o=n(777717);function a(e,t){let{isReady:n,team:a}=(0,o.t7)();return(0,i.ZP)(()=>e&&n?`${(0,l.HJ)("v4")}/${encodeURIComponent(e)}/integrations${(0,s.c)({teamId:null==a?void 0:a.id})}`:"",e=>(0,r.I)(e,{throwOnHTTPError:!0}),t)}},543865:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});var i=n(427494);let r=(0,i.H1)('<path d="M6 17C4.89543 17 4 16.1046 4 15V5C4 3.89543 4.89543 3 6 3H13C13.7403 3 14.3866 3.4022 14.7324 4M11 21H18C19.1046 21 20 20.1046 20 19V9C20 7.89543 19.1046 7 18 7H11C9.89543 7 9 7.89543 9 9V19C9 20.1046 9.89543 21 11 21Z"/>')},737164:function(e){e.exports={item:"details-table_item__Lb3u8",subitem:"details-table_subitem__SksRh",summary:"details-table_summary__cR_dP",childless:"details-table_childless__5uNeU",content:"details-table_content__4rz1N"}},13632:function(e){e.exports={content:"overview_content__oKLUP",inset:"overview_inset__NHq6A",subitem:"overview_subitem__J6RLY",outset:"overview_outset__CYLI5"}}}]);